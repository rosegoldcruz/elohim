(()=>{var e={};e.id=3470,e.ids=[3470],e.modules={101:(e,r,t)=>{"use strict";t.d(r,{_4:()=>_,d$:()=>E});var i=t(49673),s=t(71736);let _=new i.A(s._.STRIPE_SECRET_KEY,{apiVersion:"2024-06-20",typescript:!0}),E={STARTER:{name:"AEON STARTER",oneTime:{priceId:s._.NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS||"price_1RiUVxL0i8aKDQ0rtsV8jP",credits:100,price:5.99}},PRO:{name:"AEON PRO",monthly:{priceId:s._.NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY||"price_1ReF56L0i8aKDQ0rZzEwTzVD",credits:1e3,price:29.99},yearly:{priceId:s._.NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY||"price_1ReF6DL0i8aKDQ0rV0VJ7tx8",credits:12e3,price:288}},CREATOR:{name:"AEON CREATOR",monthly:{priceId:s._.NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY||"price_1ReF9hL0i8aKDQ0riUb3x64F",credits:3e3,price:59.99},yearly:{priceId:s._.NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY||"price_1ReFAZL0i8aKDQ0rXHYNfLbw",credits:36e3,price:588}},STUDIO:{name:"AEON STUDIO",monthly:{priceId:s._.NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY||"price_1ReFCML0i8aKDQ0rwmFoSEZP",credits:8e3,price:149.99},yearly:{priceId:s._.NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY||"price_1ReFGlL0i8aKDQ0riqTF84UA",credits:96e3,price:1140}}}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32871:(e,r,t)=>{"use strict";t.d(r,{w:()=>s});var i=t(72289);function s(e){let r="object"==typeof e.client?e.client:{},t="object"==typeof e.server?e.server:{},s=e.shared,_=e.runtimeEnv?e.runtimeEnv:{...process.env,...e.experimental__runtimeEnv};return function(e){let r=e.runtimeEnvStrict??e.runtimeEnv??process.env;if(e.emptyStringAsUndefined)for(let[e,t]of Object.entries(r))""===t&&delete r[e];if(e.skipValidation)return r;let t="object"==typeof e.client?e.client:{},s="object"==typeof e.server?e.server:{},_="object"==typeof e.shared?e.shared:{},E=i.Ik(t),n=i.Ik(s),o=i.Ik(_),a=e.isServer??"undefined"==typeof window,c=E.merge(o),p=n.merge(o).merge(E),I=a?p.safeParse(r):c.safeParse(r),P=e.onValidationError??(e=>{throw console.error("❌ Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables")}),R=e.onInvalidAccess??(e=>{throw Error("❌ Attempted to access a server-side environment variable on the client")});return!1===I.success?P(I.error):new Proxy(I.data,{get(r,t){if("string"==typeof t&&"__esModule"!==t&&"$$typeof"!==t)return a||!e.clientPrefix||t.startsWith(e.clientPrefix)||void 0!==o.shape[t]?r[t]:R(t)}})}({...e,shared:s,client:r,server:t,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:_})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71736:(e,r,t)=>{"use strict";t.d(r,{_:()=>_});var i=t(32871),s=t(72289);let _=(0,i.w)({server:{SUPABASE_URL:s.Yj().url(),SUPABASE_SERVICE_ROLE_KEY:s.Yj().min(1),SUPABASE_JWT_SECRET:s.Yj().min(1),STRIPE_SECRET_KEY:s.Yj().min(1),STRIPE_WEBHOOK_SECRET:s.Yj().min(1),OPENAI_API_KEY:s.Yj().min(1),REPLICATE_API_TOKEN:s.Yj().min(1),DEEPSEEK_API_KEY:s.Yj().min(1).optional(),CLAUDE_API_KEY:s.Yj().min(1).optional(),ELEVENLABS_API_KEY:s.Yj().min(1).optional(),BLOB_READ_WRITE_TOKEN:s.Yj().min(1),APP_ENV:s.k5(["development","production","test"]).default("development"),ALLOWED_ORIGINS:s.Yj().default("*")},client:{NEXT_PUBLIC_APP_URL:s.Yj().url(),NEXT_PUBLIC_SUPABASE_URL:s.Yj().url(),NEXT_PUBLIC_SUPABASE_ANON_KEY:s.Yj().min(1),NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:s.Yj().min(1),NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY:s.Yj().min(1).optional()},runtimeEnv:{SUPABASE_URL:process.env.SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY:process.env.SUPABASE_SERVICE_ROLE_KEY,SUPABASE_JWT_SECRET:process.env.SUPABASE_JWT_SECRET,STRIPE_SECRET_KEY:process.env.STRIPE_SECRET_KEY,STRIPE_WEBHOOK_SECRET:process.env.STRIPE_WEBHOOK_SECRET,OPENAI_API_KEY:process.env.OPENAI_API_KEY,REPLICATE_API_TOKEN:process.env.REPLICATE_API_TOKEN,DEEPSEEK_API_KEY:process.env.DEEPSEEK_API_KEY,CLAUDE_API_KEY:process.env.CLAUDE_API_KEY,ELEVENLABS_API_KEY:process.env.ELEVENLABS_API_KEY,BLOB_READ_WRITE_TOKEN:process.env.BLOB_READ_WRITE_TOKEN,APP_ENV:process.env.APP_ENV,ALLOWED_ORIGINS:process.env.ALLOWED_ORIGINS,NEXT_PUBLIC_APP_URL:"https://smart4technology.com",NEXT_PUBLIC_SUPABASE_URL:"https://iqcwwufogdoaiuzyqney.supabase.co",NEXT_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlxY3d3dWZvZ2RvYWl1enlxbmV5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNjUwNTIsImV4cCI6MjA2Nzk0MTA1Mn0.3ltBkJWpgrzwu0Rlrdj9LmoNbnk7cki_2B9y1x6HlWs",NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS:"price_1RiUVxL0i8aKDQ0rtsV8jP",NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY:"price_1ReF56L0i8aKDQ0rZzEwTzVD",NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY:"price_1ReF6DL0i8aKDQ0rV0VJ7tx8",NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY:"price_1ReF9hL0i8aKDQ0riUb3x64F",NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY:"price_1ReFAZL0i8aKDQ0rXHYNfLbw",NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY:"price_1ReFCML0i8aKDQ0rwmFoSEZP",NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY:"price_1ReFGlL0i8aKDQ0riqTF84UA"},skipValidation:!!process.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0})},78335:()=>{},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},94288:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>R,routeModule:()=>c,serverHooks:()=>P,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>I});var i={};t.r(i),t.d(i,{GET:()=>a});var s=t(96559),_=t(48088),E=t(37719),n=t(32190),o=t(101);async function a(e){try{let{searchParams:r}=new URL(e.url),t=r.get("session_id");if(!t)return n.NextResponse.json({error:"Session ID is required"},{status:400});let i=await o._4.checkout.sessions.retrieve(t,{expand:["subscription","customer"]});if(!i)return n.NextResponse.json({error:"Session not found"},{status:404});let s=i.metadata?.trial==="true",_=i.metadata?.plan||"aeon_pro",E=i.customer_details?.email||("object"==typeof i.customer?i.customer?.email:null);if(!E)return n.NextResponse.json({error:"Customer email not found"},{status:400});let a=await clerkClient.users.getUserList({emailAddress:[E]});if(0===a.data.length)return n.NextResponse.json({error:"User not found. Please sign up first.",redirect:"/sign-up"},{status:404});let c=a.data[0];return await clerkClient.users.updateUser(c.id,{publicMetadata:{...c.publicMetadata,credits:(c.publicMetadata?.credits||0)+1e3,subscription_tier:"aeon_pro",subscription_status:s?"trialing":"active",stripe_customer_id:"string"==typeof i.customer?i.customer:i.customer?.id,stripe_subscription_id:"string"==typeof i.subscription?i.subscription:i.subscription?.id,updated_at:new Date().toISOString()}}),n.NextResponse.json({success:!0,trial:s,plan:_,user:{id:c.id,email:c.emailAddresses[0]?.emailAddress,full_name:c.fullName||c.firstName||"User",credits:(c.publicMetadata?.credits||0)+1e3,subscription_tier:"aeon_pro",subscription_status:s?"trialing":"active"},message:s?"Free trial started successfully":"Subscription activated successfully"})}catch(e){return console.error("Checkout verification error:",e),n.NextResponse.json({error:"Failed to verify checkout session"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:_.RouteKind.APP_ROUTE,page:"/api/checkout/verify/route",pathname:"/api/checkout/verify",filename:"route",bundlePath:"app/api/checkout/verify/route"},resolvedPagePath:"C:\\Users\\Administrator\\Elohim\\frontend\\app\\api\\checkout\\verify\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:p,workUnitAsyncStorage:I,serverHooks:P}=c;function R(){return(0,E.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:I})}},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[4447,580,2289,9673],()=>t(94288));module.exports=i})();