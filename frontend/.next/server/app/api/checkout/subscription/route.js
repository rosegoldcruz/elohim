(()=>{var e={};e.id=9006,e.ids=[9006],e.modules={101:(e,r,t)=>{"use strict";t.d(r,{_4:()=>s,d$:()=>a});var i=t(49673),_=t(71736);let s=new i.A(_._.STRIPE_SECRET_KEY,{apiVersion:"2024-06-20",typescript:!0}),a={STARTER:{name:"AEON STARTER",oneTime:{priceId:_._.NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS||"price_1RiUVxL0i8aKDQ0rtsV8jP",credits:100,price:5.99}},PRO:{name:"AEON PRO",monthly:{priceId:_._.NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY||"price_1ReF56L0i8aKDQ0rZzEwTzVD",credits:1e3,price:29.99},yearly:{priceId:_._.NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY||"price_1ReF6DL0i8aKDQ0rV0VJ7tx8",credits:12e3,price:288}},CREATOR:{name:"AEON CREATOR",monthly:{priceId:_._.NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY||"price_1ReF9hL0i8aKDQ0riUb3x64F",credits:3e3,price:59.99},yearly:{priceId:_._.NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY||"price_1ReFAZL0i8aKDQ0rXHYNfLbw",credits:36e3,price:588}},STUDIO:{name:"AEON STUDIO",monthly:{priceId:_._.NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY||"price_1ReFCML0i8aKDQ0rwmFoSEZP",credits:8e3,price:149.99},yearly:{priceId:_._.NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY||"price_1ReFGlL0i8aKDQ0riqTF84UA",credits:96e3,price:1140}}}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32871:(e,r,t)=>{"use strict";t.d(r,{w:()=>_});var i=t(72289);function _(e){let r="object"==typeof e.client?e.client:{},t="object"==typeof e.server?e.server:{},_=e.shared,s=e.runtimeEnv?e.runtimeEnv:{...process.env,...e.experimental__runtimeEnv};return function(e){let r=e.runtimeEnvStrict??e.runtimeEnv??process.env;if(e.emptyStringAsUndefined)for(let[e,t]of Object.entries(r))""===t&&delete r[e];if(e.skipValidation)return r;let t="object"==typeof e.client?e.client:{},_="object"==typeof e.server?e.server:{},s="object"==typeof e.shared?e.shared:{},a=i.Ik(t),o=i.Ik(_),n=i.Ik(s),E=e.isServer??"undefined"==typeof window,c=a.merge(n),p=o.merge(n).merge(a),l=E?p.safeParse(r):c.safeParse(r),P=e.onValidationError??(e=>{throw console.error("❌ Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables")}),R=e.onInvalidAccess??(e=>{throw Error("❌ Attempted to access a server-side environment variable on the client")});return!1===l.success?P(l.error):new Proxy(l.data,{get(r,t){if("string"==typeof t&&"__esModule"!==t&&"$$typeof"!==t)return E||!e.clientPrefix||t.startsWith(e.clientPrefix)||void 0!==n.shape[t]?r[t]:R(t)}})}({...e,shared:_,client:r,server:t,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:s})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},61146:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>L,routeModule:()=>I,serverHooks:()=>d,workAsyncStorage:()=>T,workUnitAsyncStorage:()=>u});var i={};t.r(i),t.d(i,{GET:()=>P,POST:()=>R});var _=t(96559),s=t(48088),a=t(37719),o=t(32190),n=t(101),E=t(71736),c=t(72289),p=t(35282);let l=c.Ik({price_id:c.Yj().min(1),plan:c.Yj().min(1),trial:c.zM().optional().default(!1),email:c.Yj().email().optional()});async function P(e){try{let r;let{searchParams:t}=new URL(e.url),i=t.get("price_id"),_=t.get("plan"),s="true"===t.get("trial"),a=t.get("email"),c=l.parse({price_id:i,plan:_,trial:s,email:a}),p=s?process.env.NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:({aeon_starter:"price_1RiUVxL0i8aKDQ0rtsV8jP",pro_monthly:"price_1ReF56L0i8aKDQ0rZzEwTzVD",pro_yearly:"price_1ReF6DL0i8aKDQ0rV0VJ7tx8",creator_monthly:"price_1ReF9hL0i8aKDQ0riUb3x64F",creator_yearly:"price_1ReFAZL0i8aKDQ0rXHYNfLbw",studio_monthly:"price_1ReFCML0i8aKDQ0rwmFoSEZP",studio_yearly:"price_1ReFGlL0i8aKDQ0riqTF84UA"})[c.price_id]||c.price_id;if(c.email){let e=await n._4.customers.list({email:c.email,limit:1});r=e.data.length>0?e.data[0]:await n._4.customers.create({email:c.email,metadata:{plan:c.plan,trial:s.toString()}})}let P={payment_method_types:["card"],line_items:[{price:p,quantity:1}],mode:"subscription",success_url:`${E._.NEXT_PUBLIC_APP_URL}/dashboard?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${E._.NEXT_PUBLIC_APP_URL}/pricing?canceled=true`,metadata:{plan:c.plan,trial:s.toString()},billing_address_collection:"auto",allow_promotion_codes:!0};r?P.customer=r.id:P.customer_email=c.email,s&&(P.subscription_data={trial_period_days:7,metadata:{plan:"aeon_pro",trial:"true"}});let R=await n._4.checkout.sessions.create(P);return o.NextResponse.redirect(R.url)}catch(e){if(console.error("Subscription checkout error:",e),e instanceof p.G)return o.NextResponse.json({error:"Invalid request data",details:e.errors},{status:400});return o.NextResponse.json({error:"Failed to create checkout session"},{status:500})}}async function R(e){try{let r;let t=await e.json(),i=l.parse(t),_=i.trial?process.env.NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:({aeon_starter:"price_1RiUVxL0i8aKDQ0rtsV8jP",pro_monthly:"price_1ReF56L0i8aKDQ0rZzEwTzVD",pro_yearly:"price_1ReF6DL0i8aKDQ0rV0VJ7tx8",creator_monthly:"price_1ReF9hL0i8aKDQ0riUb3x64F",creator_yearly:"price_1ReFAZL0i8aKDQ0rXHYNfLbw",studio_monthly:"price_1ReFCML0i8aKDQ0rwmFoSEZP",studio_yearly:"price_1ReFGlL0i8aKDQ0riqTF84UA"})[i.price_id]||i.price_id;if(i.email){let e=await n._4.customers.list({email:i.email,limit:1});r=e.data.length>0?e.data[0]:await n._4.customers.create({email:i.email,metadata:{plan:i.plan,trial:i.trial.toString()}})}let s={payment_method_types:["card"],line_items:[{price:_,quantity:1}],mode:"subscription",success_url:`${E._.NEXT_PUBLIC_APP_URL}/dashboard?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${E._.NEXT_PUBLIC_APP_URL}/pricing?canceled=true`,metadata:{plan:i.plan,trial:i.trial.toString()},billing_address_collection:"auto",allow_promotion_codes:!0};r?s.customer=r.id:s.customer_email=i.email,i.trial&&(s.subscription_data={trial_period_days:7,metadata:{plan:"aeon_pro",trial:"true"}});let a=await n._4.checkout.sessions.create(s);return o.NextResponse.json({url:a.url})}catch(e){if(console.error("Subscription checkout error:",e),e instanceof p.G)return o.NextResponse.json({error:"Invalid request data",details:e.errors},{status:400});return o.NextResponse.json({error:"Failed to create checkout session"},{status:500})}}let I=new _.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/checkout/subscription/route",pathname:"/api/checkout/subscription",filename:"route",bundlePath:"app/api/checkout/subscription/route"},resolvedPagePath:"C:\\Users\\Administrator\\Elohim\\frontend\\app\\api\\checkout\\subscription\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:T,workUnitAsyncStorage:u,serverHooks:d}=I;function L(){return(0,a.patchFetch)({workAsyncStorage:T,workUnitAsyncStorage:u})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71736:(e,r,t)=>{"use strict";t.d(r,{_:()=>s});var i=t(32871),_=t(72289);let s=(0,i.w)({server:{SUPABASE_URL:_.Yj().url(),SUPABASE_SERVICE_ROLE_KEY:_.Yj().min(1),SUPABASE_JWT_SECRET:_.Yj().min(1),STRIPE_SECRET_KEY:_.Yj().min(1),STRIPE_WEBHOOK_SECRET:_.Yj().min(1),OPENAI_API_KEY:_.Yj().min(1),REPLICATE_API_TOKEN:_.Yj().min(1),DEEPSEEK_API_KEY:_.Yj().min(1).optional(),CLAUDE_API_KEY:_.Yj().min(1).optional(),ELEVENLABS_API_KEY:_.Yj().min(1).optional(),BLOB_READ_WRITE_TOKEN:_.Yj().min(1),APP_ENV:_.k5(["development","production","test"]).default("development"),ALLOWED_ORIGINS:_.Yj().default("*")},client:{NEXT_PUBLIC_APP_URL:_.Yj().url(),NEXT_PUBLIC_SUPABASE_URL:_.Yj().url(),NEXT_PUBLIC_SUPABASE_ANON_KEY:_.Yj().min(1),NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:_.Yj().min(1),NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS:_.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY:_.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY:_.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY:_.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY:_.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY:_.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY:_.Yj().min(1).optional()},runtimeEnv:{SUPABASE_URL:process.env.SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY:process.env.SUPABASE_SERVICE_ROLE_KEY,SUPABASE_JWT_SECRET:process.env.SUPABASE_JWT_SECRET,STRIPE_SECRET_KEY:process.env.STRIPE_SECRET_KEY,STRIPE_WEBHOOK_SECRET:process.env.STRIPE_WEBHOOK_SECRET,OPENAI_API_KEY:process.env.OPENAI_API_KEY,REPLICATE_API_TOKEN:process.env.REPLICATE_API_TOKEN,DEEPSEEK_API_KEY:process.env.DEEPSEEK_API_KEY,CLAUDE_API_KEY:process.env.CLAUDE_API_KEY,ELEVENLABS_API_KEY:process.env.ELEVENLABS_API_KEY,BLOB_READ_WRITE_TOKEN:process.env.BLOB_READ_WRITE_TOKEN,APP_ENV:process.env.APP_ENV,ALLOWED_ORIGINS:process.env.ALLOWED_ORIGINS,NEXT_PUBLIC_APP_URL:"https://smart4technology.com",NEXT_PUBLIC_SUPABASE_URL:"https://iqcwwufogdoaiuzyqney.supabase.co",NEXT_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlxY3d3dWZvZ2RvYWl1enlxbmV5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNjUwNTIsImV4cCI6MjA2Nzk0MTA1Mn0.3ltBkJWpgrzwu0Rlrdj9LmoNbnk7cki_2B9y1x6HlWs",NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS:"price_1RiUVxL0i8aKDQ0rtsV8jP",NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY:"price_1ReF56L0i8aKDQ0rZzEwTzVD",NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY:"price_1ReF6DL0i8aKDQ0rV0VJ7tx8",NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY:"price_1ReF9hL0i8aKDQ0riUb3x64F",NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY:"price_1ReFAZL0i8aKDQ0rXHYNfLbw",NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY:"price_1ReFCML0i8aKDQ0rwmFoSEZP",NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY:"price_1ReFGlL0i8aKDQ0riqTF84UA"},skipValidation:!!process.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0})},78335:()=>{},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[4447,580,2289,9673],()=>t(61146));module.exports=i})();