(()=>{var e={};e.id=5288,e.ids=[5288],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55165:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{POST:()=>c});var a=r(32190),o=r(83636),n=r(79748),i=r(33873),u=r.n(i),l=e([o]);o=(l.then?(await l)():l)[0];let h=["docs","documentation","api","guide","reference","manual","tutorial","help","support","wiki","knowledge","faq"];async function c(e){let t=null;try{let{base_url:r,urls:s,max_depth:i=2,use_js:l=!1}=await e.json();if(!r&&(!s||0===s.length))return a.NextResponse.json({error:"Either base_url or urls array must be provided"},{status:400});t=await o.default.launch({headless:!0,args:["--no-sandbox","--disable-setuid-sandbox","--disable-dev-shm-usage","--no-zygote","--disable-gpu"]});let c=await t.newPage();await c.setUserAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64)"),await c.setViewport({width:1920,height:1080});let h=u().resolve(process.cwd(),"output","harvest",Date.now().toString());await (0,n.mkdir)(h,{recursive:!0});let w=r?await p(c,r,i):s,m=[];for(let e of w)try{let t=await d(c,e,h,l);m.push({url:e,file:t,success:!0})}catch(t){m.push({url:e,file:"",success:!1,error:t instanceof Error?t.message:"Unknown error"})}return a.NextResponse.json({message:"Harvest complete",count:m.length,results:m})}catch(e){return a.NextResponse.json({error:"Harvest failed",details:e instanceof Error?e.message:"Unknown error"},{status:500})}finally{t&&await t.close()}}async function p(e,t,r){let s=new Set,a=[{url:t,depth:0}],o=new Set;for(;a.length>0;){let{url:n,depth:i}=a.shift();if(!o.has(n)&&!(i>r))for(let u of(o.add(n),await e.goto(n,{waitUntil:"networkidle0",timeout:3e4}),await e.evaluate(()=>Array.from(document.querySelectorAll("a[href]")).map(e=>({href:e.href,text:e.textContent?.toLowerCase()||"",title:e.title?.toLowerCase()||""})))))try{let e=new URL(u.href),n=new URL(t);if(e.hostname!==n.hostname)continue;let l=`${u.text} ${u.title} ${e.pathname}`.toLowerCase();h.some(e=>l.includes(e))&&!o.has(u.href)&&(s.add(u.href),i<r&&a.push({url:u.href,depth:i+1}))}catch{continue}}return Array.from(s)}async function d(e,t,r,s){await e.goto(t,{waitUntil:s?"networkidle0":"domcontentloaded",timeout:3e4}),s&&await new Promise(e=>setTimeout(e,2e3));let{title:a,content:o}=await e.evaluate(()=>(document.querySelectorAll("script, style, noscript").forEach(e=>e.remove()),{title:document.title||"untitled",content:document.body?.innerText||document.documentElement.innerText||""})),i=a.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").substring(0,50),l=`${i||"page"}.md`,c=u().join(r,l);return await (0,n.writeFile)(c,`# ${a}

${o.trim()}`),l}s()}catch(e){s(e)}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73143:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{patchFetch:()=>l,routeModule:()=>c,serverHooks:()=>h,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>d});var a=r(96559),o=r(48088),n=r(37719),i=r(55165),u=e([i]);i=(u.then?(await u)():u)[0];let c=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/harvester/route",pathname:"/api/harvester",filename:"route",bundlePath:"app/api/harvester/route"},resolvedPagePath:"C:\\Users\\Administrator\\Elohim\\frontend\\app\\api\\harvester\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:p,workUnitAsyncStorage:d,serverHooks:h}=c;function l(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:d})}s()}catch(e){s(e)}})},78335:()=>{},79748:e=>{"use strict";e.exports=require("fs/promises")},83636:e=>{"use strict";e.exports=import("puppeteer")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,580],()=>r(73143));module.exports=s})();