"use strict";(()=>{var e={};e.id=3497,e.ids=[3497],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9201:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>q,routeModule:()=>c,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{GET:()=>l,POST:()=>u});var o=t(96559),n=t(48088),i=t(37719),a=t(32190),p=t(6923);async function u(e){try{let{topic:r,custom_script:t,duration:s,style:o,platform:n,user_id:i,preset:u}=await e.json();if(!i)return a.NextResponse.json({error:"user_id is required"},{status:400});if(!r&&!t)return a.NextResponse.json({error:"Either topic or custom_script is required"},{status:400});console.log(`ðŸš€ Pipeline API: Starting video generation for user ${i}`);let l=new p.e6,c={topic:r,custom_script:t,duration:s,style:o,platform:n,user_id:i};if(u&&p.k6[u]){let e=p.k6[u];c={...c,duration:s||e.duration,style:o||e.style,platform:n||e.platform}}p.He.validateConfig(c);let d=[],x=await l.runPipeline(c,e=>{d.push(e),console.log(`ðŸ“Š Progress: ${e.progress}% - ${e.message}`)});if(x.success)return console.log(`âœ… Pipeline completed successfully for user ${i}`),a.NextResponse.json({success:!0,video_url:x.video_url,thumbnail_url:x.thumbnail_url,script:x.script,scenes:x.scenes,metadata:x.metadata,progress_log:d});return console.error(`âŒ Pipeline failed for user ${i}:`,x.error),a.NextResponse.json({error:"Pipeline execution failed",details:x.error,metadata:x.metadata},{status:500})}catch(e){return console.error("âŒ Pipeline API error:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(e){try{let{searchParams:r}=new URL(e.url);switch(r.get("action")){case"health":let t=await p.He.checkAgentHealth();return a.NextResponse.json({status:"healthy",agents:t,timestamp:new Date().toISOString()});case"metrics":let s=p.He.getPerformanceMetrics();return a.NextResponse.json({metrics:s,timestamp:new Date().toISOString()});case"presets":return a.NextResponse.json({presets:Object.keys(p.k6),configurations:p.k6});default:return a.NextResponse.json({message:"AEON Agent Pipeline API",version:"1.0.0",endpoints:{"POST /":"Run video generation pipeline","GET /?action=health":"Check agent health","GET /?action=metrics":"Get performance metrics","GET /?action=presets":"Get available presets"},agents:["TrendsAgent","ScriptWriterAgent","ScenePlannerAgent","StitcherAgent","EditorAgent"]})}}catch(e){return console.error("âŒ Pipeline API GET error:",e),a.NextResponse.json({error:"Failed to process request",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/agents/pipeline/route",pathname:"/api/agents/pipeline",filename:"route",bundlePath:"app/api/agents/pipeline/route"},resolvedPagePath:"C:\\Users\\Administrator\\Elohim\\frontend\\app\\api\\agents\\pipeline\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:x,serverHooks:g}=c;function q(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:x})}},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},11997:e=>{e.exports=require("punycode")},12412:e=>{e.exports=require("assert")},13440:e=>{e.exports=require("util/types")},23405:e=>{e.exports=require("@supabase/ssr")},27910:e=>{e.exports=require("stream")},28354:e=>{e.exports=require("util")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},36686:e=>{e.exports=require("diagnostics_channel")},37830:e=>{e.exports=require("node:stream/web")},41204:e=>{e.exports=require("string_decoder")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54287:e=>{e.exports=require("console")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},57075:e=>{e.exports=require("node:stream")},57975:e=>{e.exports=require("node:util")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{e.exports=require("node:fs")},73496:e=>{e.exports=require("http2")},73566:e=>{e.exports=require("worker_threads")},74075:e=>{e.exports=require("zlib")},74998:e=>{e.exports=require("perf_hooks")},78474:e=>{e.exports=require("node:events")},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},79646:e=>{e.exports=require("child_process")},79748:e=>{e.exports=require("fs/promises")},81630:e=>{e.exports=require("http")},84297:e=>{e.exports=require("async_hooks")},91645:e=>{e.exports=require("net")},94175:e=>{e.exports=require("stream/web")},94735:e=>{e.exports=require("events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580,2289,7478,1746,2419,4448,3010,596,4316,6923],()=>t(9201));module.exports=s})();