(()=>{var e={};e.id=3456,e.ids=[3456],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10909:(e,t,a)=>{Promise.resolve().then(a.bind(a,23187))},11409:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=a(65239),s=a(48088),l=a(88170),i=a.n(l),n=a(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d={children:["",{children:["generate",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,23187)),"C:\\Users\\Administrator\\Elohim\\frontend\\app\\generate\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"C:\\Users\\Administrator\\Elohim\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\Administrator\\Elohim\\frontend\\app\\generate\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/generate/page",pathname:"/generate",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23187:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Administrator\\\\Elohim\\\\frontend\\\\app\\\\generate\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Administrator\\Elohim\\frontend\\app\\generate\\page.tsx","default")},23405:e=>{"use strict";e.exports=require("@supabase/ssr")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},46553:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(60687),s=a(43210),l=a(63974),i=a(24934),n=a(35245),o=a(47828),d=a(41867);class c{async createProject(e){try{let{data:t,error:a}=await this.supabase.from("projects").insert({user_id:e.userId,name:e.name,description:e.description,status:"draft"}).select().single();if(a)throw a;return d.Ay.capture("project_created",{project_id:t.id,project_name:e.name,description:e.description,user_id:e.userId,timestamp:new Date().toISOString()}),{data:t,error:null}}catch(e){return console.error("Failed to create project:",e),{data:null,error:e}}}async updateProjectStatus(e,t){try{let{data:a,error:r}=await this.supabase.from("projects").update({status:t}).eq("id",e).select().single();if(r)throw r;return d.Ay.capture("project_status_changed",{project_id:e,new_status:t,timestamp:new Date().toISOString()}),{data:a,error:null}}catch(e){return console.error("Failed to update project status:",e),{data:null,error:e}}}async createAgentJob(e){try{let{data:t,error:a}=await this.supabase.from("agent_jobs").insert({project_id:e.projectId,scene_id:e.sceneId,agent_type:e.agentType,status:e.status||"pending",started_at:new Date().toISOString()}).select().single();if(a)throw a;return d.Ay.capture("agent_job_created",{project_id:e.projectId,scene_id:e.sceneId,agent_type:e.agentType,job_id:t.id,timestamp:new Date().toISOString()}),{data:t,error:null}}catch(e){return console.error("Failed to create agent job:",e),{data:null,error:e}}}async updateAgentJob(e,t){try{let a={status:t.status,finished_at:new Date().toISOString()};t.result&&(a.result=t.result);let{data:r,error:s}=await this.supabase.from("agent_jobs").update(a).eq("id",e).select().single();if(s)throw s;let l=r.started_at?new Date().getTime()-new Date(r.started_at).getTime():0;return d.Ay.capture("agent_job_completed",{job_id:e,project_id:r.project_id,agent_type:r.agent_type,status:t.status,processing_time_ms:l,success:"complete"===t.status,error_message:t.errorMessage,timestamp:new Date().toISOString()}),{data:r,error:null}}catch(e){return console.error("Failed to update agent job:",e),{data:null,error:e}}}async createAsset(e){try{let{data:t,error:a}=await this.supabase.from("assets").insert({project_id:e.projectId,type:e.type,url:e.url,meta:e.meta}).select().single();if(a)throw a;return d.Ay.capture("asset_created",{project_id:e.projectId,asset_id:t.id,asset_type:e.type,asset_url:e.url,file_size_bytes:e.meta?.fileSize,duration_seconds:e.meta?.duration,timestamp:new Date().toISOString()}),{data:t,error:null}}catch(e){return console.error("Failed to create asset:",e),{data:null,error:e}}}async updateCredits(e,t,a,r){try{let{data:s}=await this.supabase.from("credits").select("balance").eq("user_id",e).single(),l=(s?.balance||0)-t,{data:i,error:n}=await this.supabase.from("credits").upsert({user_id:e,balance:l,updated_at:new Date().toISOString()}).select().single();if(n)throw n;return d.Ay.capture("credits_used",{user_id:e,credits_used:t,credits_remaining:l,operation:a,project_id:r,timestamp:new Date().toISOString()}),{data:i,error:null}}catch(e){return console.error("Failed to update credits:",e),{data:null,error:e}}}async getProjectAnalytics(e){try{let[{data:t},{data:a},{data:r},{data:s}]=await Promise.all([this.supabase.from("projects").select("*").eq("id",e).single(),this.supabase.from("scenes").select("*").eq("project_id",e),this.supabase.from("agent_jobs").select("*").eq("project_id",e),this.supabase.from("assets").select("*").eq("project_id",e)]);return{data:{project:t,sceneCount:a?.length||0,jobCount:r?.length||0,completedJobs:r?.filter(e=>"complete"===e.status).length||0,assetCount:s?.length||0,totalProcessingTime:r?.reduce((e,t)=>t.started_at&&t.finished_at?e+(new Date(t.finished_at).getTime()-new Date(t.started_at).getTime()):e,0)||0},error:null}}catch(e){return console.error("Failed to get project analytics:",e),{data:null,error:e}}}constructor(){this.supabase=(0,o.U)()}}let u=new c,p=[{value:"kling",label:"Kling Pro"},{value:"luma",label:"Luma Dream"},{value:"gen3",label:"Runway Gen-3"},{value:"pika",label:"Pika Labs"},{value:"wan",label:"Wan Video"}],m=[{value:"cinematic",label:"Cinematic"},{value:"anime",label:"Anime"},{value:"realistic",label:"Realistic"},{value:"abstract",label:"Abstract"}],h=["5 seconds","10 seconds","15 seconds"],g=[{value:"16:9",label:"16:9 (Landscape)"},{value:"9:16",label:"9:16 (Portrait)"},{value:"1:1",label:"1:1 (Square)"}],x=["HD 1080p","HD 720p"];function b(){let[e,t]=(0,s.useState)(""),[a,d]=(0,s.useState)(""),[c,b]=(0,s.useState)(""),[f,j]=(0,s.useState)(h[0]),[w,y]=(0,s.useState)(g[0].value),[_,v]=(0,s.useState)(x[0]),[S,N]=(0,s.useState)(!1),[C,k]=(0,s.useState)(null);(0,o.U)();let{trackProjectCreated:I,trackVideoGeneration:A,trackFeatureUsage:P}=(0,n._)(),q=async()=>{if(e.trim()&&C){N(!0);try{let{data:t,error:r}=await u.createProject({userId:C.id,name:`Video: ${e.substring(0,50)}...`,description:e});if(r||!t){console.error("Failed to create project:",r),N(!1);return}for(let r of(I({projectId:t.id,projectName:t.name,description:t.description,sceneCount:1}),A({projectId:t.id,topic:e,style:a,duration:parseInt(f.split(" ")[0]),model:c,creditsUsed:100}),P("video_generation_form_submit",{project_id:t.id,model:c,style:a,duration:f,aspectRatio:w,quality:_,promptLength:e.length}),["script_writer","visual_gen","editor"]))await u.createAgentJob({projectId:t.id,agentType:r});await u.updateProjectStatus(t.id,"generating"),setTimeout(()=>N(!1),2e3)}catch(e){console.error("Error generating video:",e),N(!1)}}};return(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-black via-[#19132c] to-black flex flex-col items-center justify-center py-12 px-2",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl bg-zinc-900/90 rounded-2xl shadow-2xl p-8 border border-purple-900",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-6 text-center",children:"Generate Video"}),(0,r.jsx)("label",{className:"text-white mb-2 block",children:"Video Prompt"}),(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),className:"w-full mb-6 rounded-lg bg-black/70 border border-zinc-800 text-white p-3 resize-none focus:outline-none focus:border-purple-500",rows:4,placeholder:"Describe your video idea in detailâ€¦"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-white mb-2 block",children:"Video Style"}),(0,r.jsxs)(l.Select,{value:a,onValueChange:d,children:[(0,r.jsx)(l.SelectTrigger,{className:"w-full bg-black text-white border border-white rounded-lg focus:ring-2 focus:ring-purple-500 shadow-xl",children:(0,r.jsx)(l.SelectValue,{placeholder:"Select style"})}),(0,r.jsx)(l.SelectContent,{className:"bg-black text-white border border-purple-700 shadow-2xl rounded-lg",children:m.map(({value:e,label:t})=>(0,r.jsx)(l.SelectItem,{value:e,children:t},e))})]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-white mb-2 block",children:"AI Model"}),(0,r.jsxs)(l.Select,{value:c,onValueChange:b,children:[(0,r.jsx)(l.SelectTrigger,{className:"w-full bg-black text-white border border-white rounded-lg focus:ring-2 focus:ring-purple-500 shadow-xl",children:(0,r.jsx)(l.SelectValue,{placeholder:"Select model"})}),(0,r.jsx)(l.SelectContent,{className:"bg-black text-white border border-purple-700 shadow-2xl rounded-lg",children:p.map(({value:e,label:t})=>(0,r.jsx)(l.SelectItem,{value:e,children:t},e))})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-white mb-2 block",children:"Duration"}),(0,r.jsxs)(l.Select,{value:f,onValueChange:j,children:[(0,r.jsx)(l.SelectTrigger,{className:"w-full bg-black text-white border border-white rounded-lg focus:ring-2 focus:ring-purple-500 shadow-xl",children:(0,r.jsx)(l.SelectValue,{placeholder:"Duration"})}),(0,r.jsx)(l.SelectContent,{className:"bg-black text-white border border-purple-700 shadow-2xl rounded-lg",children:h.map(e=>(0,r.jsx)(l.SelectItem,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-white mb-2 block",children:"Aspect Ratio"}),(0,r.jsxs)(l.Select,{value:w,onValueChange:y,children:[(0,r.jsx)(l.SelectTrigger,{className:"w-full bg-black text-white border border-white rounded-lg focus:ring-2 focus:ring-purple-500 shadow-xl",children:(0,r.jsx)(l.SelectValue,{placeholder:"Aspect Ratio"})}),(0,r.jsx)(l.SelectContent,{className:"bg-black text-white border border-purple-700 shadow-2xl rounded-lg",children:g.map(({value:e,label:t})=>(0,r.jsx)(l.SelectItem,{value:e,children:t},e))})]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-white mb-2 block",children:"Quality"}),(0,r.jsxs)(l.Select,{value:_,onValueChange:v,children:[(0,r.jsx)(l.SelectTrigger,{className:"w-full bg-black text-white border border-white rounded-lg focus:ring-2 focus:ring-purple-500 shadow-xl",children:(0,r.jsx)(l.SelectValue,{placeholder:"Quality"})}),(0,r.jsx)(l.SelectContent,{className:"bg-black text-white border border-purple-700 shadow-2xl rounded-lg",children:x.map(e=>(0,r.jsx)(l.SelectItem,{value:e,children:e},e))})]})]})]}),(0,r.jsx)(i.$,{className:"w-full py-3 mt-4 text-lg font-bold bg-gradient-to-r from-purple-600 via-fuchsia-600 to-pink-600 text-white rounded-xl hover:scale-[1.02] transition-transform shadow-xl",onClick:q,disabled:S,children:S?"Generating...":"Generate Video (5 Credits)"})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,a)=>{"use strict";a.d(t,{Select:()=>c,SelectContent:()=>g,SelectItem:()=>x,SelectTrigger:()=>p,SelectValue:()=>u});var r=a(60687),s=a(43210),l=a(22670),i=a(78272),n=a(3589),o=a(13964),d=a(96241);let c=l.bL;l.YJ;let u=l.WT,p=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.l9.displayName;let m=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));m.displayName=l.PP.displayName;let h=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})}));h.displayName=l.wn.displayName;let g=s.forwardRef(({className:e,children:t,position:a="popper",...s},i)=>(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[(0,r.jsx)(m,{}),(0,r.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(h,{})]})}));g.displayName=l.UC.displayName,s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=l.JU.displayName;let x=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:t})]}));x.displayName=l.q7.displayName,s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=l.wv.displayName},81053:(e,t,a)=>{Promise.resolve().then(a.bind(a,46553))}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4447,7694,4097,6866],()=>a(11409));module.exports=r})();