exports.id=596,exports.ids=[596],exports.modules={29934:(e,t,n)=>{"use strict";n.d(t,{Fr:()=>o,_f:()=>i,an:()=>s,iZ:()=>r});let r=[{name:"minimax/video-01",label:"MiniMax Video 01",duration:6,price:.5,fields:["prompt","first_frame_image","subject_reference","prompt_optimizer"],docs:"https://replicate.com/minimax/video-01",provider:"replicate",maxResolution:"1280x720",aspectRatios:["16:9","9:16","1:1"],defaultParams:{prompt_optimizer:!0}},{name:"minimax/video-01-director",label:"MiniMax Director",duration:6,price:.5,fields:["prompt","first_frame_image","prompt_optimizer"],docs:"https://replicate.com/minimax/video-01-director",provider:"replicate",maxResolution:"1280x720",aspectRatios:["16:9","9:16"],defaultParams:{prompt_optimizer:!0}},{name:"minimax/video-01-live",label:"MiniMax Live",duration:6,price:.5,fields:["prompt","first_frame_image","prompt_optimizer"],docs:"https://replicate.com/minimax/video-01-live",provider:"replicate",maxResolution:"1280x720",aspectRatios:["16:9","9:16"],defaultParams:{prompt_optimizer:!0}},{name:"kwaivgi/kling-v1.6-standard",label:"Kling v1.6 Standard",duration:5,price:.9,fields:["prompt","negative_prompt","aspect_ratio","start_image","reference_images","cfg_scale","duration"],docs:"https://replicate.com/kwaii/kling-v1.6-standard",provider:"replicate",maxResolution:"1920x1080",aspectRatios:["16:9","9:16","1:1"],defaultParams:{aspect_ratio:"16:9",cfg_scale:7.5,duration:5}},{name:"wan-video/wan-2.1-1.3b",label:"Wan Video 2.1 1.3b",duration:5,price:.3,fields:["prompt","aspect_ratio","frame_num","resolution","sample_steps","sample_guide_scale","sample_shift","seed"],docs:"https://replicate.com/wan-video/wan-2.1-1.3b",provider:"replicate",maxResolution:"1024x576",aspectRatios:["16:9","9:16"],defaultParams:{aspect_ratio:"16:9",frame_num:120,resolution:"1024x576",sample_steps:20,sample_guide_scale:7.5,sample_shift:1}}];function s(e){return r.find(t=>t.name===e)}function o(){return r.map(e=>e.name)}function i(e){let t=s(e);return t?!!t.fields.includes("prompt")||(console.error(`❌ Model ${e} missing required 'prompt' field`),!1):(console.error(`❌ Model not found: ${e}`),!1)}},50848:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=50848,e.exports=t},54263:(e,t,n)=>{"use strict";n.d(t,{N:()=>l,Y:()=>c});var r=n(32419),s=n.n(r),o=n(29934),i=n(71736);let a=new(s())({auth:i._.REPLICATE_API_TOKEN});class l{async generateVideoParallel(e,t={}){let{agentCount:n=5,scenesPerAgent:r=2,modelNames:s=o.iZ.map(e=>e.name),customSceneInputs:i=[],progressCallback:a}=t;this.progressCallback=a,console.log(`🎬 ParallelVisualGenerationAgent: Starting parallel generation`),console.log(`📊 Configuration: ${n} agents, ${r} scenes per agent`),console.log(`🎯 Total scenes: ${e.length}, Expected: ${n*r}`);let l=Date.now();try{this.validateInputs(e,n,r,s);let t=this.initializeAgentProgress(n,s,r);this.updateProgress({stage:"initializing",totalScenes:e.length,completedScenes:0,failedScenes:0,currentAgent:0,agentProgress:t});let o=this.createAgentJobs(e,n,r,s,i);this.updateProgress({stage:"generating",totalScenes:e.length,completedScenes:0,failedScenes:0,currentAgent:0,agentProgress:t.map(e=>({...e,status:"running"}))});let a=await Promise.all(o.map((e,n)=>this.runAgentForScenes(e,n,t))),c=a.flat().sort((e,t)=>e.sceneIndex-t.sceneIndex),_=Date.now()-l,p=c.filter(e=>e.success),E=c.filter(e=>!e.success),d=a.reduce((e,t)=>e+t.cost,0);return console.log(`✅ Parallel generation completed in ${_}ms`),console.log(`📊 Results: ${p.length}/${c.length} scenes successful`),console.log(`💰 Total cost: $${d.toFixed(2)}`),this.updateProgress({stage:"completed",totalScenes:e.length,completedScenes:p.length,failedScenes:E.length,currentAgent:n,agentProgress:t.map(e=>({...e,status:"completed"}))}),{success:p.length>0,sceneResults:c,totalProcessingTime:_,totalCost:d,agentResults:a,error:E.length>0?`${E.length} scenes failed to generate`:void 0}}catch(t){return console.error("❌ Parallel generation failed:",t),this.updateProgress({stage:"failed",totalScenes:e.length,completedScenes:0,failedScenes:e.length,currentAgent:0,agentProgress:[]}),{success:!1,sceneResults:[],totalProcessingTime:Date.now()-l,totalCost:0,agentResults:[],error:t instanceof Error?t.message:"Unknown error"}}}validateInputs(e,t,n,r){let s=t*n;if(e.length!==s)throw Error(`Scene count mismatch: Expected ${s} scenes (${t} agents \xd7 ${n} scenes), got ${e.length}`);if(r.length!==t)throw Error(`Model count mismatch: Expected ${t} models for ${t} agents, got ${r.length}`);for(let e of r)if(!(0,o._f)(e))throw Error(`Invalid model configuration: ${e}`);if(!i._.REPLICATE_API_TOKEN)throw Error("REPLICATE_API_TOKEN is required for video generation");console.log("✅ Input validation passed")}initializeAgentProgress(e,t,n){return Array.from({length:e},(e,r)=>({agentId:r,modelName:t[r],status:"pending",scenesAssigned:n,scenesCompleted:0,scenesFailed:0}))}createAgentJobs(e,t,n,r,s){let i=[],a=0;for(let l=0;l<t;l++){let t=e.slice(a,a+n),c=(0,o.an)(r[l]);if(!c)throw Error(`Model not found: ${r[l]}`);let _=s.slice(a,a+n);i.push({agentId:l,model:c,scenes:t.map((e,t)=>({prompt:e,sceneIndex:a+t,customInputs:_[t]||{}}))}),a+=n}return i}async runAgentForScenes(e,t,n){let{agentId:r,model:s,scenes:o}=e,i=Date.now();console.log(`🤖 Agent ${r}: Starting generation with ${s.name} for ${o.length} scenes`);try{let e=[];for(let i=0;i<o.length;i++){let a=o[i];n[t].currentScene=a.sceneIndex,this.updateProgress({stage:"generating",totalScenes:n.reduce((e,t)=>e+t.scenesAssigned,0),completedScenes:n.reduce((e,t)=>e+t.scenesCompleted,0),failedScenes:n.reduce((e,t)=>e+t.scenesFailed,0),currentAgent:r,agentProgress:[...n]});try{let o=await this.generateSingleScene(a,s,r);e.push(o),o.success?(n[t].scenesCompleted++,console.log(`✅ Agent ${r}: Scene ${a.sceneIndex} completed`)):(n[t].scenesFailed++,console.error(`❌ Agent ${r}: Scene ${a.sceneIndex} failed: ${o.error}`))}catch(o){n[t].scenesFailed++,console.error(`❌ Agent ${r}: Scene ${a.sceneIndex} error:`,o),e.push({sceneIndex:a.sceneIndex,prompt:a.prompt,videoUrl:"",success:!1,agentId:r,modelUsed:s.name,processingTime:0,error:o instanceof Error?o.message:"Unknown error"})}}let a=Date.now()-i,l=e.filter(e=>e.success).length;return n[t].status="completed",console.log(`✅ Agent ${r}: Completed ${l}/${o.length} scenes in ${a}ms`),{agentId:r,modelName:s.name,success:l>0,scenesProcessed:o.length,totalProcessingTime:a,cost:s.price*o.length,sceneResults:e}}catch(e){return console.error(`❌ Agent ${r}: Critical error:`,e),n[t].status="failed",n[t].error=e instanceof Error?e.message:"Unknown error",{agentId:r,modelName:s.name,success:!1,scenesProcessed:0,totalProcessingTime:Date.now()-i,cost:0,error:e instanceof Error?e.message:"Unknown error"}}}async generateSingleScene(e,t,n){let r=Date.now();console.log(`🎬 Agent ${n}: Generating scene ${e.sceneIndex} with ${t.name}`),console.log(`📝 Prompt: "${e.prompt.substring(0,100)}..."`);try{let s=this.buildModelInput(e,t);console.log(`🔧 Agent ${n}: Input fields:`,Object.keys(s));let o=await a.run(t.name,{input:s}),i=this.extractVideoUrl(o);if(!i)throw Error("No video URL returned from Replicate API");let l=Date.now()-r;return console.log(`✅ Agent ${n}: Scene ${e.sceneIndex} generated in ${l}ms`),console.log(`🎥 Video URL: ${i}`),{sceneIndex:e.sceneIndex,prompt:e.prompt,videoUrl:i,success:!0,agentId:n,modelUsed:t.name,processingTime:l}}catch(o){let s=Date.now()-r;return console.error(`❌ Agent ${n}: Scene ${e.sceneIndex} failed:`,o),{sceneIndex:e.sceneIndex,prompt:e.prompt,videoUrl:"",success:!1,agentId:n,modelUsed:t.name,processingTime:s,error:o instanceof Error?o.message:"Unknown error"}}}buildModelInput(e,t){let n={prompt:e.prompt};if(t.defaultParams&&Object.assign(n,t.defaultParams),e.customInputs)for(let r of t.fields)"prompt"!==r&&void 0!==e.customInputs[r]&&(n[r]=e.customInputs[r]);return this.applyModelSpecificDefaults(n,t),n}applyModelSpecificDefaults(e,t){t.name.includes("minimax")&&t.fields.includes("prompt_optimizer")&&void 0===e.prompt_optimizer&&(e.prompt_optimizer=!0),t.name.includes("kling")&&(void 0===e.aspect_ratio&&(e.aspect_ratio="16:9"),void 0===e.cfg_scale&&(e.cfg_scale=7.5),void 0===e.duration&&(e.duration=t.duration)),t.name.includes("wan-video")&&(void 0===e.frame_num&&(e.frame_num=120),void 0===e.sample_steps&&(e.sample_steps=20),void 0===e.sample_guide_scale&&(e.sample_guide_scale=7.5))}extractVideoUrl(e){if("string"==typeof e)return e;if(Array.isArray(e)&&e.length>0)return e[0];if(e&&"object"==typeof e){if(e.video_url)return e.video_url;if(e.url)return e.url;if(e.output)return e.output;if(e.result)return e.result}throw Error(`Unexpected output format: ${JSON.stringify(e)}`)}updateProgress(e){this.progressCallback&&this.progressCallback(e)}}async function c(e,t=5,n=2,r=o.iZ.map(e=>e.name),s,i){return new l().generateVideoParallel(e,{agentCount:t,scenesPerAgent:n,modelNames:r,customSceneInputs:s,progressCallback:i})}},71736:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(32871),s=n(72289);let o=(0,r.w)({server:{SUPABASE_URL:s.Yj().url(),SUPABASE_SERVICE_ROLE_KEY:s.Yj().min(1),SUPABASE_JWT_SECRET:s.Yj().min(1),STRIPE_SECRET_KEY:s.Yj().min(1),STRIPE_WEBHOOK_SECRET:s.Yj().min(1),OPENAI_API_KEY:s.Yj().min(1),REPLICATE_API_TOKEN:s.Yj().min(1),DEEPSEEK_API_KEY:s.Yj().min(1).optional(),CLAUDE_API_KEY:s.Yj().min(1).optional(),ELEVENLABS_API_KEY:s.Yj().min(1).optional(),BLOB_READ_WRITE_TOKEN:s.Yj().min(1),APP_ENV:s.k5(["development","production","test"]).default("development"),ALLOWED_ORIGINS:s.Yj().default("*")},client:{NEXT_PUBLIC_APP_URL:s.Yj().url(),NEXT_PUBLIC_SUPABASE_URL:s.Yj().url(),NEXT_PUBLIC_SUPABASE_ANON_KEY:s.Yj().min(1),NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:s.Yj().min(1),NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY:s.Yj().min(1).optional(),NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY:s.Yj().min(1).optional()},runtimeEnv:{SUPABASE_URL:process.env.SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY:process.env.SUPABASE_SERVICE_ROLE_KEY,SUPABASE_JWT_SECRET:process.env.SUPABASE_JWT_SECRET,STRIPE_SECRET_KEY:process.env.STRIPE_SECRET_KEY,STRIPE_WEBHOOK_SECRET:process.env.STRIPE_WEBHOOK_SECRET,OPENAI_API_KEY:process.env.OPENAI_API_KEY,REPLICATE_API_TOKEN:process.env.REPLICATE_API_TOKEN,DEEPSEEK_API_KEY:process.env.DEEPSEEK_API_KEY,CLAUDE_API_KEY:process.env.CLAUDE_API_KEY,ELEVENLABS_API_KEY:process.env.ELEVENLABS_API_KEY,BLOB_READ_WRITE_TOKEN:process.env.BLOB_READ_WRITE_TOKEN,APP_ENV:process.env.APP_ENV,ALLOWED_ORIGINS:process.env.ALLOWED_ORIGINS,NEXT_PUBLIC_APP_URL:"https://smart4technology.com",NEXT_PUBLIC_SUPABASE_URL:"https://iqcwwufogdoaiuzyqney.supabase.co",NEXT_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlxY3d3dWZvZ2RvYWl1enlxbmV5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNjUwNTIsImV4cCI6MjA2Nzk0MTA1Mn0.3ltBkJWpgrzwu0Rlrdj9LmoNbnk7cki_2B9y1x6HlWs",NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,NEXT_PUBLIC_STRIPE_PRICE_STARTER_PASS:"price_1RiUVxL0i8aKDQ0rtsV8jP",NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY:"price_1ReF56L0i8aKDQ0rZzEwTzVD",NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY:"price_1ReF6DL0i8aKDQ0rV0VJ7tx8",NEXT_PUBLIC_STRIPE_PRICE_CREATOR_MONTHLY:"price_1ReF9hL0i8aKDQ0riUb3x64F",NEXT_PUBLIC_STRIPE_PRICE_CREATOR_YEARLY:"price_1ReFAZL0i8aKDQ0rXHYNfLbw",NEXT_PUBLIC_STRIPE_PRICE_STUDIO_MONTHLY:"price_1ReFCML0i8aKDQ0rwmFoSEZP",NEXT_PUBLIC_STRIPE_PRICE_STUDIO_YEARLY:"price_1ReFGlL0i8aKDQ0riqTF84UA"},skipValidation:!!process.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0})}};